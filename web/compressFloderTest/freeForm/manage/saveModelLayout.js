window.onload=function(){YCDCommon.loading("on_load")};function on_load(){registerParent()}function registerParent(){window.vm=new Vue({el:"#saveForm",data:{formData:{MNAME:"",MIMG:"",MDESCRIPT:"",MBODY:""},rules:{MNAME:[{required:true,message:"请输入模板名称",trigger:"blur"}]}},created:function(){},computed:{},watch:{},methods:{commonFunction:$DS.util.commonFunction,sure:sure,close:$DS.util.close,choosePicture:choosePicture}})}function choosePicture(){showMyDialog("图片库","95%","95%","imageUpLoad/upload.html?callBack=getPictureInfo&basePath="+parent.$DS.util.getProjectName(parent.VUECFG.appId),function(){})}function getPictureInfo(r){var e=r.attr("uri");window.vm.$data.formData.MIMG=e}function sure(){var r=this.formData;var e=parent.VUECFG;this.formData.MBODY={appId:e.appId,formObj:e.formObj,firstObj:e.firstObj,lazyObj:e.lazyObj,normalObj:e.normalObj,pageArr:e.pageArr,sort:e.sort};var a=parent.$DS.saveTable(parent.VUECFG.appId,"add",r,"DM_FORM_MODELPAGE","GUID",function(r){if(!r)parent.alert("保存失败!");else{parent.alert("保存成功!");close_()}},"保存模板信息失败!");if(a.isError){alert(a.errMsg);return false}}