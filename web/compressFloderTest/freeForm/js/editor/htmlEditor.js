var ue;var currContainer;var args={};var table={tableWhitList:{table:["id","name","class","ctrlname","dataitem","formula","data","name","onclick"],tr:["rindex"],td:["cindex"]},tableAttr:[{name:"onclick",value:'exeParent("initProperty",this)'},{name:"class",value:"_portItem"},{name:"ctrlname",value:"TABLE"}],tableProperty:[{key:"#port_ctrlname",value:"name"},{key:"#port_ctrltype",value:"ctrlname"},{key:"#port_dataitem",value:"dataitem"},{key:"#port_show",value:""}],fontSize:"14px",fontfamily:"Arial"};for(key in table.tableWhitList){addWhiteList(key,table.tableWhitList[key])}window.top["pageRady"]=pageRady;$(document).ready(function(){loadingFunction("pageRady")});function pageRady(){var t=window.UEDITOR_CONFIG;if(args&&args.whitList){for(key in args.whitList){t.whitList[key]=args.whitList[key]}}var e=window.location.search.split("ctrlId=")[1];var r=parent.$DS.getCtrlById(e).info.ds_rich_type;r=r?r:"1";if(args){switch(r){case"0":t.toolbars=[[]];break;case"1":t.toolbars=[["undo","redo","selectall","cleardoc","|","bold","italic","underline","strikethrough","forecolor","backcolor","formatmatch","pasteplain","|","insertorderedlist","insertunorderedlist","|","lineheight","|","fontfamily","fontsize","|","|","justifyleft","justifycenter","justifyright","justifyjustify","attachment","template","|","spechars","|","searchreplace","help"]];break;case"2":t.toolbars=[["undo","redo","selectall","cleardoc","|","bold","italic","underline","fontborder","strikethrough","forecolor","backcolor","superscript","subscript","removeformat","formatmatch","autotypeset","pasteplain","|","insertorderedlist","insertunorderedlist","|","lineheight","|","fontfamily","fontsize","|","|","justifyleft","justifycenter","justifyright","justifyjustify","|","attachment","template","background","|","horizontal","spechars","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","|","print","searchreplace","help"]];break;case"3":t.toolbars=[["source","|","undo","redo","selectall","cleardoc","|","bold","italic","underline","fontborder","strikethrough","forecolor","backcolor","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","insertorderedlist","insertunorderedlist","|","indent","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","insertimage","emotion","scrawl","attachment","map","gmap","insertframe","pagebreak","template","background","|","horizontal","date","time","spechars","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","|","print","searchreplace","drafts","help"]];break}}ue=UE.getEditor("editor",t);UE.Editor.prototype._bkGetActionUrl=UE.Editor.prototype.getActionUrl;UE.Editor.prototype.getActionUrl=function(t){if(t=="upload"){debugger;return`${getProjectName()}/sysconfig/frame/uploadFastDFS?FOLDERID=UEditor`}else if(t=="uploadvideo"){return""}else{return this._bkGetActionUrl.call(this,t)}};ue.addListener("ready",function(t){var e=window.location.search.split("ctrlId=")[1];var i=$("#edui1").height();var n=$("#edui1_toolbarbox").height();if(r=="0"){$("#edui1_toolbarbox").hide();this.setHeight(i-25)}else{this.setHeight(i-n-25)}var a=parent.$DS.getCtrlById(e).info.ds_rich;if(a){setContent(a)}currContainer=$(this.container);var o=parent.$DS.getCtrlById(e).info.ds_rich_isedit;if(o!==true){setDisabled()}window["ueditorisLoad"]=true;addJsForChildForSrc(this.container,getProjectName()+"/static/jquery/jquery-1.10.2.min.js");var s="\n"+"function loadCssUrl(url, id) {\n"+"var ycdcss = document.createElement('link');\n"+"ycdcss.setAttribute('id', \"css_\" + id);\n"+'ycdcss.setAttribute("rel", "stylesheet");\n'+'ycdcss.setAttribute("type", "text/css");\n'+'ycdcss.setAttribute("href", url);\n'+'if (typeof ycdcss != "undefined") {\n'+'document.getElementsByTagName("head")[0].appendChild(ycdcss);\n'+"}\n"+"}\n"+"loadCssUrl('"+getProjectName()+"/freeForm/css/pubcss/css/public.css', 'pubcss')\n"+"function exeParent(functionName,params){\n"+"\t\n"+"\tif(parent.parent[functionName]){\n"+"\t\tparent.parent[functionName](params)\n"+"\t}\n"+"}"+"function getElByAttr(ctrl,key,value) {\n"+'\treturn $(ctrl+"["+key+"=\'"+value+"\']")\n'+"}"+"function getElByClass(cls) {\n"+"\treturn document.getElementsByClassName(cls);\n"+"}"+"function addAllClick() {\n"+"\t\n"+'\tvar domArr=document.getElementsByClassName("_portItem");\n'+"\tfor(var d=0;d<domArr.length;d++){\n"+'\t\tdomArr[d].setAttribute("onclick","exeParent(\'initProperty\',this)")\n'+"\t}\n"+"}"+"function findDom(key) {\n"+'\treturn $("body").find(key);\n'+"}";addJsForChild(this.container,s)});ue.addListener("beforepaste",function(t,e){});ue.addListener("afterpaste",function(t,e,r){label.copy(t,e,r)});ue.addListener("focus",function(t){var e=window.location.search.split("ctrlId=")[1];if(e){var r=parent.$DS.getCtrlById(e).info;if(!r.ds_ispro){parent.changeCurrId({currentTarget:parent.$(`#${e}`)[0],id:e})}}});var i=true;ue.addListener("contentChange",function(){var t=getContent();var e=window.location.search.split("ctrlId=")[1];if(e){parent.$DS.getCtrlById(e).info.ds_rich=t;parent.$DS.getCtrlById(e).info.ds_proChange=false;if(i){i=false;return}if(!parent.VUECFG.viewStatu){var r=getPlainTxt();var n=parent.VUECFG.proObj[e];for(var a=0;a<n.length;a++){if(n[a].info.ds_name==="ds_rich"){parent.VUECFG.proObj[e][a].info.ds_input=t+""}}}}window.top.ue_contentChange=true});ue.addListener("beforeExecCommand",function(t,e,r){});ue.addListener("selectionchange",function(){var t=UE.getEditor("editor").selection._cachedStartElement;var e=UE.getEditor("editor").selection._cachedStartElementPath;if(isClear(t,e)&&!parent.editable){parent.clearProperty($(t));try{if($(currContainer).find("iframe")[0].contentWindow&&$(currContainer).find("iframe")[0].contentWindow.addAllClick)$(currContainer).find("iframe")[0].contentWindow.addAllClick()}catch(t){console.log(currContainer)}}})}function isClear(t,e){if(parent.pageType=="WORD"){if($(t).attr("class")&&$(t).attr("class").indexOf("_portItem")!=-1)return false;if(e){for(var r=0;r<e.length;r++){if($(e[r]).attr("class")&&$(e[r]).attr("class").indexOf("_portItem")!=-1){return false}}}}else{return false}return true}function insertImg(t){if(t){UE.getEditor("editor").execCommand("insertimage",t);UE.getEditor("editor").fireEvent("catchRemoteImage")}}function insertIframe(t){var e=t.url;var r=t.ctrlname;var i=t.width;var n=t.height;var a=t.scroll;var o=t.frameborder;var s=t.float;var l=t.name;var d=UE.getEditor("editor");var c=d._iframe;var u=d.document.createElement("iframe");var f;e=e.replace(/^\s*|\s*$/gi,"");i=i?i:300;n=n?n:300;if(!e){alert(lang.enterAddress);return false}u.setAttribute("src",/http:\/\/|https:\/\//gi.test(e)?e:e);/^[1-9]+[.]?\d*$/g.test(i)?u.setAttribute("width",i):"";/^[1-9]+[.]?\d*$/g.test(n)?u.setAttribute("height",n):"";a?u.setAttribute("scrolling","yes"):u.setAttribute("scrolling","no");o?u.setAttribute("frameborder","1",0):u.setAttribute("frameborder","0",0);s?u.setAttribute("align",s):u.setAttribute("align","");u.setAttribute("ctrlname",r);u.setAttribute("name",l);if(c){c.parentNode.insertBefore(u,c);domUtils.remove(c)}else{f=d.document.createElement("div");f.appendChild(u);d.execCommand("inserthtml",f.innerHTML)}d._iframe=null}function isFocus(t){alert(UE.getEditor("editor").isFocus());UE.dom.domUtils.preventDefault(t)}function setblur(t){UE.getEditor("editor").blur();UE.dom.domUtils.preventDefault(t)}function insertHtml(t){UE.getEditor("editor").execCommand("insertHtml",t)}function createEditor(){UE.getEditor("editor")}function getAllHtml(){return UE.getEditor("editor").getAllHtml()}function getContent(){return UE.getEditor("editor").getContent()}function getPlainTxt(){return UE.getEditor("editor").getPlainTxt()}function setContent(t,e){UE.getEditor("editor").setContent(t,e)}function setDisabled(){UE.getEditor("editor").setDisabled("fullscreen")}function setEnabled(){UE.getEditor("editor").setEnabled()}function getText(){var t=UE.getEditor("editor").selection.getRange();t.select();var e=UE.getEditor("editor").selection.getText();alert(e)}function getContentTxt(){var t=[];return UE.getEditor("editor").getContentTxt()}function hasContent(){var t=[];t.push("使用editor.hasContents()方法判断编辑器里是否有内容");t.push("判断结果为：");t.push(UE.getEditor("editor").hasContents());alert(t.join("\n"))}function setFocus(){UE.getEditor("editor").focus()}function deleteEditor(){UE.getEditor("editor").destroy()}function getLocalData(){alert(UE.getEditor("editor").execCommand("getlocaldata"))}function clearLocalData(){UE.getEditor("editor").execCommand("clearlocaldata");alert("已清空草稿箱")}function iniTableByDataSource(t){if(!t){t={type:"insert",numRows:1,numCols:1}}return UE.getEditor("editor").execCommand("inserttable",t)}UE.commands["inserttable"]={queryCommandState:function(){return exeCmd.getTableItemsByRange(this).table?-1:0},execCommand:function(t,e){function r(t,e){var r=[],i=t.numRows,n=t.numCols;if(!t.type)t.type="insert";var a="";if(table){if(t.type=="insert"){for(var o=0;o<i;o++){r.push("<tr"+(o==0?' class="firstRow"':"")+">");for(var s=0;s<n;s++){r.push('<td width="'+e+'"  vAlign="'+t.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+"</td>")}r.push("</tr>")}var l=JSON.stringify(table.tableAttr);a="<table ";if(l){var d=JSON.parse(l);d.push({name:"id",value:"port_"+getGuid()});d.push({name:"name",value:"表格_"+getGuid()});for(var c=0;c<d.length;c++){if(d[c].name=="name")t.name=d[c].value;a+=d[c].name+"= '"+d[c].value+"'"}}a+="><tbody>"+r.join("")+"</tbody></table>"}else if(t.type=="source"){var u=t.cloum;r.push('<tr class="firstRow" >');for(var s=0;s<u.length;s++){r.push('<td align="center" width="'+e+'"  vAlign="'+t.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+u[s].name+"</td>")}r.push("</tr>");r.push("<tr>");for(var s=0;s<u.length;s++){r.push('<td align="'+u[s].align+'" width="'+e+'"  vAlign="'+t.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+"${"+u[s].value+"}</td>")}r.push("</tr>");r="<tbody><div>"+r.join("")+"</div></tbody>";$(t.el).html(r)}}else{a="<table><tbody>"+r.join("")+"</tbody></table>"}return a}if(!e){e=utils.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign})}var i=this;var n=this.selection.getRange(),a=n.startContainer,o=i.body;var s=exeCmd.getDefaultValue(i),l=o.offsetWidth,d=Math.floor(l/e.numCols-s.tdPadding*2-s.tdBorder);!e.tdvalign&&(e.tdvalign=i.options.tdvalign);var c=r(e,d);if(!e.type||e.type=="insert"){i.execCommand("inserthtml",c)}return e.name}};function _exeCmd(){this.getTableItemsByRange=function(t){return UE.UETable.getTableItemsByRange(t)};this.getUETableBySelected=function(t){return UE.UETable.getUETableBySelected(t)},this.getDefaultValue=function(t,e){return UE.UETable.getDefaultValue(t,e)},this.getUETable=function(t){return UE.UETable.getUETable(t)}}var exeCmd=new _exeCmd;function getGuid(){var t,e="";t=new Date;e+=t.getMonth()+1+""+t.getDate()+""+t.getYear()+"-";e+=t.getHours()+""+t.getMinutes()+""+t.getSeconds()+""+t.getMilliseconds();return e}function addWhiteList(t,e){for(v=0;v<e.length;v++){if(whitList&&whitList[t]&&!(whitList[t].indexOf(e[v])>-1)){whitList[t].push(e[v])}}}function exeParent(t,e){debugger;if(parent[t]){parent[t](e)}}function loadJavaScript(t,e,r){if(!r)r=document;var i=r.createElement("script");i.type="text/javascript";i.id="js_"+e;if($("#js_"+e).length==0){try{i.appendChild(r.createTextNode(t))}catch(e){i.text=t}r.getElementsByTagName("head")[0].appendChild(i)}}function loadJavaScriptForSrc(t,e,r){if(!r)r=document;var i=r.createElement("script");i.type="text/javascript";i.id="js_"+e;if($("#js_"+e).length==0){try{i.src=t}catch(e){i.src=t}r.getElementsByTagName("head")[0].appendChild(i)}}function addJsForChild(t,e){loadJavaScript(e,getGuid(),$(t).find("iframe")[0].contentDocument)}function addJsForChildForSrc(t,e){loadJavaScriptForSrc(e,getGuid(),$(t).find("iframe")[0].contentDocument)}function getElByAttr(t,e,r){return $(t+"["+e+"='"+r+"']")}function getElByClass(t){return document.getElementsByClassName(t)}function addAllClick(){debugger;var t=document.getElementsByClassName("_portItem");for(var e=0;e<t.length;e++){t[e].setAttribute("onclick","exeParent('initProperty',this)")}}function findDom(t){return $("body").find(t)}