var $tree={type:"drag_tree",dataType:"levelData",uuid:Date.parse(new Date),getConfig:getTreeConfig,register:registerTree,showProperty:showPropertyTree,setData:setTreeVal,getData:getTreeVal,clearData:clearTreeVal,setCurrentNode:setCurrentNodeByKey,getCurrentNode:getCurrentNodeByCtrlId,setCheckedNodes:setCheckedKeysByKeys,getCheckedNodes:getCheckedNodesByCtrlId,getHalfCheckedNodes:getHalfCheckedNodesByCtrlId,clearCheckedNodes:clearCheckedNodesByCtrlId,isTrigger:isTrigger};function getTreeConfig(){return{ds_id:"",ds_ctrlname:"TREE_"+$tree.uuid++,ds_show:true,ds_showCondition:"",ds_width:"100%",ds_height:"100%",ds_style:"drawing-item",ds_datasource:"",ds_param:"",ds_backParamCondition:"",ds_trigger:"",ds_loading:"normal",ds_out_padding:"0rem",ds_out_margin:"0rem",ds_ispro:false,ds_pid:"",ds_draggable:"true",ds_tree:"",ds_tree_idFiled_sql:"ID",ds_tree_pidFiled_sql:"PID",ds_tree_nameFiled_sql:"NAME",ds_node_key:"ID",ds_label_filed:"NAME",ds_children_filed:"children",ds_showTitTip:false,ds_tree_render_after_expand:true,ds_tree_highlight_current:true,ds_tree_render_content:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:渲染信息",ds_tree_isfilter:false,ds_tree_filterFiled:"",ds_tree_empty_text:"无数据",ds_tree_default_expand_all:false,ds_tree_showCheckbox:false,ds_tree_choseEndOnly:false,ds_tree_check_strictly:false,ds_tree_check_on_click_node:false,ds_tree_indent:16,ds_tree_icon_class:"el-icon-caret-right",ds_tree_node_icon_class:"el-icon-delete",ds_tree_iconField:"",ds_tree_node_fontsize:"1rem",ds_tree_node_color:"#606266",ds_tree_node_fontfamily:"微软雅黑",ds_tree_nodeHeight:"2rem",ds_tree_node_fontWeight:"normal",ds_tree_auto_expand_parent:true,ds_tree_rootId:"#",ds_tree_rootText:"全部",ds_tree_expand_on_click_node:false,ds_tree_default_expanded_keys:[],ds_tree_default_expanded_first:false,ds_tree_isignoreRoot:false,ds_tree_current_node_key:"",ds_tree_isCurrentRow_reload:true,ds_tree_default_current_node_key:"",ds_tree_default_checked_keys:[],ds_tree_checked_keys:[],ds_tree_draggable:false,ds_tree_allow_drag:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象}\ntrue",ds_tree_allow_drop:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:当前拖拽的 Node 对象, type:type 参数有三种情况：'prev'、'inner' 和 'next'，分别表示放置在目标节点前、插入至目标节点和放置在目标节点后}\ntrue",ds_tree_node_drag_start:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:拖拽的节点对象,event:事件对象}",ds_tree_node_drag_enter:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:被拖拽的 Node 对象,targetNode:所进入节点对应的 Node 对象,event:事件对象}",ds_tree_node_drag_Leave:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:被拖拽的 Node 对象,leaveNode:所离开的节点对应的 Node 对象,event:事件对象}",ds_tree_node_drag_over:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:被拖拽的 Node 对象,targetNode:当前进入节点对应的 Node 对象,event:事件对象}",ds_tree_node_drag_end:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:被拖拽的 Node 对象,targetNode:结束拖拽时最后进入的节点 Node 对象,position:被拖拽节点的放置位置（before、after、inner）,event:事件对象}",ds_tree_node_drag:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:被拖拽的 Node 对象,targetNode:结束拖拽时最后进入的节点 Node 对象(可能为空),position:被拖拽节点的放置位置（before、after、inner）,event:事件对象}",ds_load_success:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称},//trigger:是否触发控件刷新",ds_tree_node_click:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据,component:节点组件本身}",ds_tree_node_click_after:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据,component:节点组件本身}",ds_tree_node_expand:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据,component:节点组件本身}",ds_tree_node_collapse:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据,component:节点组件本身}",ds_tree_currentChange:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据}",ds_tree_node_contextmenu:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据,component:节点组件本身}",ds_tree_node_check:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:传递给 data 属性的数组中该节点所对应的对象,checkInfo:选中状态对象}",ds_tree_check_change:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{data:当前节点的数据,isCheck:节点是否被选中,isCheckChild:节点的子树中是否有被选中的节点}",ds_tree_disabled:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{data:当前节点的数据,node:节点对象}\n"+"val.data.disabled?val.data.disabled:false"}}function registerTree(){Vue.component("drag_tree",{props:["type","info"],created:function(){this.$nextTick(function(){if(this.$refs.treeRef){window.top[this.info.ds_id+"treeRef"]=this.$refs.treeRef}addListener(this);if(!this.info.ds_ispro)temporary.loadRegister[this.info.ds_id]=true;let e=getCurrentNodeByCtrlId(this.info.ds_id);if(e){jumpToSelectNode(this.$el,e)}VUECFG.$refs[this.info.ds_id]=this})},destroyed:function(){if(window.top[this.info.ds_id+"treeRef"]){delete window.top[this.info.ds_id+"treeRef"]}},data:function(){return{hide:"y-hide",refdate:Date.parse(new Date)}},computed:{computed_drag:function(){if(VUECFG.viewStatu)return false;return this.info.ds_draggable},computed_props:function(){return{children:this.info.ds_children_filed,label:this.info.ds_label_filed,disabled:function(e,d){return e.disabled}}},computed_data:function(){if(this.info.ds_tree_isCurrentRow_reload&&temporary.loadRegister&&temporary.loadRegister[this.info.ds_id]&&temporary[this.info.ds_id+"_tempDataForReload"]&&temporary[this.info.ds_id+"_tempDataForReload"].length>0){this.$nextTick(function(){this.info.ds_tree_current_node_key=temporary[this.info.ds_id+"_tempDataForReload"][0][this.info.ds_node_key];this.$refs.treeRef.setCurrentKey(this.info.ds_tree_current_node_key)})}if(this.info.ds_tree&&this.info.ds_tree.length>0){if(typeof this.info.ds_tree=="string"){this.info.ds_tree=JSON.parse(this.info.ds_tree)}if(this.info.ds_datasource&&$DS.getSourceById(this.info.ds_datasource).sourceType=="sqlData"){this.info.ds_tree=changTreeDataFiled(this.info,this.info.ds_tree)}else if(this.info.ds_tree_rootId&&this.info.ds_tree_rootText){var e=[{}];e[0].ID=this.info.ds_tree_rootId;e[0].PID="";e[0].NAME=this.info.ds_tree_rootText;e[0].children=this.info.ds_tree}this.info.ds_tree=this.disabled(this.info.ds_tree,this);return this.info.ds_tree}else{return[]}},computed_show:function(){var refdateStr=`${this.refdate}_change`;if(!VUECFG.viewStatu){return this.info.ds_ispro&&!this.info.ds_show?"y-hide":"y-show"}else{if(this.info.ds_showCondition){var str=$DS.util.replace(this.info.ds_showCondition);return eval(str)?"y-show":"y-hide"}return this.info.ds_show?"y-show":"y-hide"}},computed_treename:function(){if(!VUECFG.viewStatu)return this.info.ds_ctrlname;return""},computed_Ts:function(){if(!this.info.ds_showTitTip&&VUECFG.viewStatu){return{height:"0rem"}}},computed_Bs:function(){if(!this.info.ds_showTitTip&&VUECFG.viewStatu){return{height:"calc(100% - 0rem)",color:this.info.ds_tree_nodeHeight}}},computed_outerstyle:function(){var e={padding:this.info.ds_out_padding,margin:this.info.ds_out_margin,width:"100%",marginLeft:"0rem"};return e},computed_style:function(){this.$nextTick(function(){if(this.info.ds_tree_nodeHeight){$(`#${this.info.ds_id} .el-tree-node__content`).css("height",this.info.ds_tree_nodeHeight)}});return{height:this.info.ds_tree_nodeHeight,width:this.info.ds_width,display:"none"}},computed_expandedKeys:function(){var e=this.info;var d=e.ds_tree;var s=[];var t=temporary.loadRegister&&temporary.loadRegister[this.info.ds_id]?false:true;var r=temporary[this.info.ds_id+"_tempDataForReload"]&&temporary[this.info.ds_id+"_tempDataForReload"].length>0?true:false;if(!d||d.length==0){return[]}if(e.ds_tree_default_expanded_first===true&&!this.info.ds_tree_isCurrentRow_reload&&t){if(e.ds_tree_isignoreRoot&&d[0].children&&d[0].children.length>0){s.push(d[0].children[0][e.ds_node_key]);e.ds_tree_current_node_key=d[0].children[0][e.ds_node_key]}else{s.push(d[0][e.ds_node_key]);e.ds_tree_current_node_key=d[0][e.ds_node_key]}}else if(!this.info.ds_tree_isCurrentRow_reload&&t){if(e.ds_tree_current_node_key&&s.indexOf(e.ds_tree_current_node_key)===-1){e.ds_tree_current_node_key=d[0][e.ds_node_key];s.push(e.ds_tree_current_node_key)}}else if(this.info.ds_tree_isCurrentRow_reload&&!t&&r){s.push(temporary[this.info.ds_id+"_tempDataForReload"][0][this.info.ds_node_key])}else if(!this.info.ds_tree_isCurrentRow_reload&&!t||this.info.ds_tree_isCurrentRow_reload&&!r){if(e.ds_tree_default_expanded_first===true){if(e.ds_tree_isignoreRoot&&d[0].children&&d[0].children.length>0){s.push(d[0].children[0][e.ds_node_key]);e.ds_tree_current_node_key=d[0].children[0][e.ds_node_key]}else{s.push(d[0][e.ds_node_key]);e.ds_tree_current_node_key=d[0][e.ds_node_key]}}}if(e.ds_tree_showCheckbox&&e.ds_tree_default_checked_keys){var _=e.ds_tree_default_checked_keys;for(let e=0;e<_.length;e++){if(s.indexOf(_[e])===-1){s.push(_[e])}}}return s}},methods:{changeCurrId:changeCurrId,mouseOver:ctrlMouseOver,mouseLeave:ctrlMouseLeave,treeNodeClick:treeNodeClick,renderContent:renderContent,filterNode:filterNode,currentChange:currentChange,treeNodeExpand:treeNodeExpand,treeNodeCollapse:treeNodeCollapse,treeNodeCheck:treeNodeCheck,nodeContextmenu:nodeContextmenu,checkChange:checkChange,disabled:disabled,allowDrag:allowDrag,allowDrop:allowDrop,nodeDragStart:nodeDragStart,nodeDragEnter:nodeDragEnter,nodeDragLeave:nodeDragLeave,nodeDragOver:nodeDragOver,nodeDragEnd:nodeDragEnd,nodeDrop:nodeDrop},template:util.getModelHtml("drag_tree")})}function loadSuccess(e,d){var s=this.info;$DS.eval(s.ds_load_success,s)}function disabled(e,d){for(let r=0;r<e.length;r++){var s=false;var t=false;s=$DS.eval(d.info.ds_tree_disabled,d.info,{data:e[r]});if(d.info.ds_tree_choseEndOnly&&d.info.ds_tree_showCheckbox&&e[r].children){t=true}e[r].disabled=s||t;e[r]["NAME"]=e[r][d.info.ds_tree_nameFiled_sql]?e[r][d.info.ds_tree_nameFiled_sql]:e[r]["NAME"];if(e[r].children&&e[r].children.length>0){disabled(e[r].children,d)}}return e}function nodeDragEnd(e,d,s,t){var r=this.info;var _={draggingNode:e,targetNode:d,position:s,event:t};var o=$DS.eval(r.ds_tree_node_drag_end,r,_)}function nodeDrop(e,d,s,t){var r=this.info;var _={draggingNode:e,targetNode:d,position:s,event:t};var o=$DS.eval(r.ds_tree_node_drag,r,_)}function nodeDragOver(e,d,s){var t=this.info;var r={draggingNode:e,targetNode:d,event:s};var _=$DS.eval(t.ds_tree_node_drag_over,t,r)}function nodeDragLeave(e,d,s){var t=this.info;var r={draggingNode:e,leaveNode:d,event:s};var _=$DS.eval(t.ds_tree_node_drag_Leave,t,r)}function nodeDragEnter(e,d,s){var t=this.info;var r={draggingNode:e,targetNode:d,event:s};var _=$DS.eval(t.ds_tree_node_drag_enter,t,r)}function nodeDragStart(e,d){var s=this.info;var t={node:e,event:e};var r=$DS.eval(s.ds_tree_node_drag_start,s,t)}function allowDrop(e,d,s){var t=this.info;var r={draggingNode:e,type:s};var _=$DS.eval(t.ds_tree_allow_drop,t,r);return _}function allowDrag(e){var d=this.info;var s={node:e};var t=$DS.eval(d.ds_tree_allow_drag,d,s);return t}function checkChange(e,d,s){var t=this.info;var r={data:e,isCheck:d,isCheckChild:s};$DS.eval(t.ds_tree_check_change,t,r)}function nodeContextmenu(e,d,s,t){var r=this.info;var _={node:s,data:d,component:t};$DS.eval(r.ds_tree_node_contextmenu,r,_)}function treeNodeCheck(e,d){var s=this.info;if(!this.info.ds_ispro){changeCurrId({currentTarget:$(`#${s.ds_id}`)[0],id:s.ds_id})}var s=this.info;var t={node:e,checkInfo:d};$DS.eval(s.ds_tree_node_check,s,t);$DS.dealPms(s,d.checkedNodes);if(s.ds_trigger&&s.ds_trigger.length>0){triggerComps(s.ds_trigger,$DS.getCtrlType(s.ds_id))}}function treeNodeExpand(e,d,s){var t=this.info;if(t.ds_tree_render_after_expand==true){var r=t.ds_tree_nodeHeight;t.ds_tree_nodeHeight="";t.ds_tree_nodeHeight=r}if(!this.info.ds_ispro){changeCurrId({currentTarget:$(`#${t.ds_id}`)[0],id:t.ds_id})}var _={data:e,node:d,component:s};$DS.eval(t.ds_tree_node_expand,t,_)}function treeNodeCollapse(e,d,s){var t=this.info;var r={data:e,node:d,component:s};$DS.eval(t.ds_tree_node_collapse,t,r)}function currentChange(e,d){var s=this.info;var t={data:e,node:d};$DS.eval(s.ds_tree_currentChange,s,t)}function treeNodeClick(e,d,s){var t=this.info;if(!this.info.ds_ispro){changeCurrId({currentTarget:$(`#${t.ds_id}`)[0],id:t.ds_id})}var r={data:e,node:d,component:s};$DS.eval(t.ds_tree_node_click,t,r);var _=[];var o=$DS.util.clone(e);o.parent=$DS.util.clone(d.parent.data);_.push(o);$DS.dealPms(t,_);temporary[t.ds_id+"_tempDataForReload"]=_;$DS.eval(t.ds_tree_node_click_after,t,r);if(t.ds_trigger&&t.ds_trigger.length>0){triggerComps(t.ds_trigger,$DS.getCtrlType(t.ds_id))}}function renderContent(h,{node:node,data:data,store:store}){var info=this.info;var params={h:h,node:node,data:data,store:store};var renderDom=$DS.eval(info.ds_tree_render_content,info,params);if($DS.util.isString(renderDom))return eval(renderDom);return h("span",{class:data[info.ds_tree_iconField]?data[info.ds_tree_iconField]:""},[h("span",[h("span",{domProps:{innerHTML:node.label},style:{fontSize:info.ds_tree_node_fontsize,color:info.ds_tree_node_color,fontFamily:info.ds_tree_node_fontfamily,fontWeight:info.ds_tree_node_fontWeight}})])])}function filterNode(e,d){var s=this.info;var t=this.$refs.treeRef;if(!e)return true;var r=this.info.ds_tree_filterFiled;if(r===""||r===undefined||r.length<=0){r=[];r.push(s.ds_label_filed)}for(let _=0;_<r.length;_++){if(d[r[_]].indexOf(e)!==-1){if(s.ds_tree_click_flag===false){t.setCurrentKey(d[s.ds_node_key]);s.ds_tree_click_flag=true}return true}}}function isShowFilterFiled(e,d){$DS.setRightProShow(e.ds_pid,{ds_tree_filterFiled:d?true:false})}function isShowCheckboxPro(e,d){$DS.setRightProShow(e.ds_pid,{ds_tree_check_strictly:d?true:false,ds_tree_check_on_click_node:d?true:false,ds_tree_node_check:d?true:false,ds_tree_default_checked_keys:d?true:false,ds_tree_choseEndOnly:d?true:false})}function showPropertyTree(e){var d=[];var s=getProInfoByObj("select",{ds_id:"type",ds_pid:VUECFG.ctrlId,ds_labeltxt:"组件类型",ds_placeholder:"组件类型",ds_style:"ds-mt-1",ds_draggable:"false",ds_group:true,ds_options:getAllCtrl(),ds_select:$tree.type,ds_select_change:"changeFormCtrl",ds_name:"type",ds_ispro:true});d.push(s);var t=getProInfoByObj("input",{ds_id:"ds_ctrlname",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"控件名",ds_placeholder:"控件名",ds_input:VUECFG.formObj[VUECFG.ctrlId].info.ds_ctrlname,ds_input_blur:"checkDuplication",ds_name:"ds_ctrlname",ds_ispro:true});d.push(t);var r=getProInfoByObj("input",{ds_id:"ds_width",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"控件宽度",ds_placeholder:"控件宽度",ds_input:"100%",ds_name:"ds_width",ds_ispro:true,ds_isrequired:false});d.push(r);var _=getProInfoByObj("input",{ds_id:"ds_height",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"控件高度",ds_placeholder:"控件高度",ds_input:"100%",ds_name:"ds_height",ds_ispro:true});d.push(_);var o=getProInfoByObj("select",{ds_id:"ds_datasource",ds_pid:VUECFG.ctrlId,ds_labeltxt:"数据源",ds_placeholder:"数据源",ds_style:"ds-mt-1",ds_draggable:"false",ds_options:getAllDatasource(),ds_select:"",ds_select_change:"changeDataSourceForCtrl",ds_select_visible_change:"changeDatasourceOption",ds_name:"ds_datasource",ds_ispro:true,group1:"数据源",group2:""});d.push(o);var a=getProInfoByObj("input",{ds_id:"ds_tree_idFiled_sql",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"唯一ID字段",ds_input:"ID",ds_name:"ds_tree_idFiled_sql",ds_ispro:true,ds_show:false,group1:"数据源",group2:"字段配置"});d.push(a);var n=getProInfoByObj("input",{ds_id:"ds_tree_pidFiled_sql",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"PID字段",ds_input:"PID",ds_name:"ds_tree_pidFiled_sql",ds_ispro:true,ds_show:false,group1:"数据源",group2:"字段配置"});d.push(n);var i=getProInfoByObj("input",{ds_id:"ds_tree_nameFiled_sql",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"名称字段",ds_input:"NAME",ds_name:"ds_tree_nameFiled_sql",ds_ispro:true,ds_show:true,group1:"数据源",group2:"字段配置"});d.push(i);var l=getProInfoByObj("input",{ds_id:"ds_node_key",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"节点ID",ds_input:"ID",ds_name:"ds_node_key",ds_ispro:true,ds_show:false,group1:"数据源",group2:""});d.push(l);var c=getProInfoByObj("input",{ds_id:"ds_label_filed",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"节点名称字段",ds_input:"NAME",ds_name:"ds_label_filed",ds_ispro:true,ds_show:false,group1:"数据源",group2:""});d.push(c);var p=getProInfoByObj("input",{ds_id:"ds_children_filed",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"子集名称",ds_input:"children",ds_name:"ds_children_filed",ds_ispro:true,ds_readonly:true,ds_show:false,group1:"数据源",group2:""});d.push(p);var g=getProInfoByObj("input",{ds_id:"ds_out_padding",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"内边距大小",ds_placeholder:"内边距大小",ds_input:"0rem",ds_name:"ds_out_padding",ds_ispro:true,group1:"属性",group2:"组件布局"});d.push(g);var u=getProInfoByObj("input",{ds_id:"ds_out_margin",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"外边距大小",ds_placeholder:"外边距大小",ds_input:"0rem",ds_name:"ds_out_margin",ds_ispro:true,group1:"属性",group2:"组件布局"});d.push(u);var f=getProInfoByObj("input",{ds_id:"ds_tree_empty_text",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"空值提示",ds_placeholder:"",ds_input:"无数据",ds_name:"ds_tree_empty_text",ds_ispro:true,group1:"属性",group2:"组件属性"});d.push(f);var h=getProInfoByObj("input",{ds_id:"ds_tree_rootId",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"根节点ID",ds_placeholder:"默认为 '#'",ds_input:"#",ds_name:"ds_tree_rootId",ds_ispro:true,group1:"属性",group2:"根节点属性"});d.push(h);var b=getProInfoByObj("input",{ds_id:"ds_tree_rootText",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"根节点名称",ds_placeholder:"",ds_input:"全部",ds_name:"ds_tree_rootText",ds_ispro:true,group1:"属性",group2:"根节点属性"});d.push(b);var v=getProInfoByObj("input",{ds_id:"ds_tree_icon_class",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"图标类名",ds_placeholder:"请输入图标类名",ds_input:"el-icon-caret-right",ds_append:"选择",ds_input_appendclick:"clickChooseIcon",ds_name:"ds_tree_icon_class",ds_ispro:true,group1:"属性",group2:"节点图标"});d.push(v);var m=getProInfoByObj("select",{ds_id:"ds_tree_iconField",ds_pid:VUECFG.ctrlId,ds_labeltxt:"节点图标字段",ds_placeholder:"",ds_style:"ds-mt-1",ds_draggable:"false",ds_options:getAllDatasourceField(),ds_select:"",ds_select_visible_change:"changeFieldOption",ds_name:"ds_tree_iconField",ds_show:true,ds_ispro:true,ds_multiple:false,group1:"属性",group2:"节点图标"});d.push(m);var y=getProInfoByObj("color",{ds_id:"ds_tree_node_color",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"节点字体颜色",ds_name:"ds_tree_node_color",ds_ispro:true,ds_show_alpha:true,ds_color:"#606266",group1:"属性",group2:"节点字体"});d.push(y);var C=getProInfoByObj("input",{ds_id:"ds_tree_node_fontsize",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"节点字体大小",ds_placeholder:"节点字体大小",ds_input:"1rem",ds_name:"ds_tree_node_fontsize",ds_ispro:true,ds_isrequired:false,group1:"属性",group2:"节点字体"});d.push(C);var I=getProInfoByObj("select",{ds_id:"ds_tree_node_fontfamily",ds_pid:VUECFG.ctrlId,ds_labeltxt:"节点字体样式",ds_placeholder:"节点字体样式",ds_style:"ds-mt-1",ds_draggable:"false",ds_options:getFontFamily(),ds_select:"微软雅黑",ds_name:"ds_tree_node_fontfamily",ds_ispro:true,group1:"属性",group2:"节点字体"});d.push(I);var j=getProInfoByObj("select",{ds_id:"ds_tree_node_fontWeight",ds_pid:VUECFG.ctrlId,ds_labeltxt:"节点字体加粗",ds_placeholder:"节点字体加粗",ds_style:"ds-mt-1",ds_draggable:"false",ds_options:getFontWeight(),ds_select:"normal",ds_name:"ds_tree_node_fontWeight",ds_ispro:true,group1:"属性",group2:"节点字体"});d.push(j);var k=getProInfoByObj("input",{ds_id:"ds_tree_indent",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"节点缩进",ds_placeholder:"相邻级节点间的水平缩进",ds_input:16,ds_name:"ds_tree_indent",ds_ispro:true,ds_valformat:"NUMBER",group1:"属性",group2:"节点属性"});d.push(k);var w=getProInfoByObj("input",{ds_id:"ds_tree_nodeHeight",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"节点高度",ds_placeholder:"",ds_input:"2rem",ds_name:"ds_tree_nodeHeight",ds_show:true,ds_ispro:true,group1:"属性",group2:"节点属性"});d.push(w);var N=getProInfoByObj("switch",{ds_id:"ds_tree_highlight_current",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"高亮选中节点",ds_name:"ds_tree_highlight_current",ds_switch:true,ds_ispro:true,group1:"属性",group2:"节点属性"});d.push(N);var x=getProInfoByObj("radio",{ds_id:"ds_tree_expand_on_click_node",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"展开方式",ds_name:"ds_tree_expand_on_click_node",ds_radio:false,ds_options:[{value:true,text:"点击节点"},{value:false,text:"点击箭头"}],ds_radiobtn:true,ds_ispro:true,group1:"属性",group2:"节点展开"});d.push(x);var F=getProInfoByObj("switch",{ds_id:"ds_tree_isCurrentRow_reload",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"选中刷新前选中节点",ds_name:"ds_tree_isCurrentRow_reload",ds_switch:true,ds_ispro:true,group1:"属性",group2:"节点展开"});d.push(F);var D=getProInfoByObj("input",{ds_id:"ds_tree_default_checked_keys",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"默认勾选的节点",ds_placeholder:"",ds_input:"",ds_name:"ds_tree_default_checked_keys",ds_ispro:true,ds_valformat:"ARRAY",ds_input_focus:"selectCurrentNodeKey",ds_show:false,group1:"属性",group2:"节点展开"});d.push(D);var E=getProInfoByObj("switch",{ds_id:"ds_tree_default_expand_all",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"展开所有节点",ds_name:"ds_tree_default_expand_all",ds_switch:false,ds_ispro:true,group1:"属性",group2:"节点展开"});d.push(E);var B=getProInfoByObj("switch",{ds_id:"ds_tree_default_expanded_first",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"展开第一个节点",ds_name:"ds_tree_default_expanded_first",ds_switch:false,ds_switch_change:"isshowIgnoreRoot",ds_ispro:true,group1:"属性",group2:"节点展开"});d.push(B);var P=getProInfoByObj("switch",{ds_id:"ds_tree_isignoreRoot",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"忽略根节点",ds_name:"ds_tree_isignoreRoot",ds_switch:false,ds_show:false,ds_ispro:true,group1:"属性",group2:"节点展开"});d.push(P);var V=getProInfoByObj("switch",{ds_id:"ds_tree_auto_expand_parent",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"展开子节点时展开父节点",ds_name:"ds_tree_auto_expand_parent",ds_switch:true,ds_ispro:true,group1:"属性",group2:"节点展开"});d.push(V);var O=getProInfoByObj("switch",{ds_id:"ds_tree_render_after_expand",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"节点展开渲染",ds_name:"ds_tree_render_after_expand",ds_switch:true,ds_ispro:true,group1:"属性",group2:"节点展开"});d.push(O);var S=getProInfoByObj("switch",{ds_id:"ds_tree_showCheckbox",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"是否开启复选框",ds_name:"ds_tree_showCheckbox",ds_switch:false,ds_ispro:true,ds_active_value:true,ds_inactive_value:false,ds_switch_change:"isShowCheckboxPro",group1:"属性",group2:"复选框"});d.push(S);var U=getProInfoByObj("switch",{ds_id:"ds_tree_choseEndOnly",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"仅末级节点可用",ds_name:"ds_tree_choseEndOnly",ds_switch:false,ds_ispro:true,ds_show:false,ds_active_value:true,ds_inactive_value:false,group1:"属性",group2:"复选框"});d.push(U);var G=getProInfoByObj("switch",{ds_id:"ds_tree_check_on_click_node",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"点击复选框选中节点",ds_name:"ds_tree_check_on_click_node",ds_switch:false,ds_ispro:true,ds_active_value:true,ds_inactive_value:false,ds_show:false,group1:"属性",group2:"复选框"});d.push(G);var T=getProInfoByObj("switch",{ds_id:"ds_tree_check_strictly",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"父子节点不关联",ds_name:"ds_tree_check_strictly",ds_switch:false,ds_ispro:true,ds_active_value:true,ds_inactive_value:false,ds_show:false,group1:"属性",group2:"复选框"});d.push(T);var R=getProInfoByObj("switch",{ds_id:"ds_tree_isfilter",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"开启过滤",ds_name:"ds_tree_isfilter",ds_switch:false,ds_ispro:true,ds_switch_change:"isShowFilterFiled",group1:"属性",group2:"节点过滤"});d.push(R);var A=getProInfoByObj("select",{ds_id:"ds_tree_filterFiled",ds_pid:VUECFG.ctrlId,ds_labeltxt:"过滤字段",ds_show:true,ds_placeholder:"默认为节点名称",ds_style:"ds-mt-1",ds_draggable:"false",ds_options:getAllDatasourceField(),ds_select:"",ds_select_visible_change:"changeFieldOption",ds_name:"ds_tree_filterFiled",ds_ispro:true,ds_multiple:true,group1:"属性",group2:"节点过滤"});d.push(A);var q=getProInfoByObj("switch",{ds_id:"ds_tree_draggable",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"是否开启节点拖拽",ds_name:"ds_tree_draggable",ds_switch:false,ds_ispro:true,group1:"属性",group2:"节点拖拽"});d.push(q);var H=getProInfoByObj("jseditor",{ds_id:"ds_tree_allow_drag",ds_pid:VUECFG.ctrlId,ds_labeltxt:"判断节点能否被拖拽",ds_placeholder:"params(node)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象}\ntrue",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_allow_drag",ds_ispro:true,ds_savedb:false,group1:"属性",group2:"节点拖拽"});d.push(H);var M=getProInfoByObj("jseditor",{ds_id:"ds_tree_allow_drop",ds_pid:VUECFG.ctrlId,ds_labeltxt:"目标节点能否被放置",ds_placeholder:"params(draggingNode, dropNode, type)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:当前拖拽的 Node 对象, type:type 参数有三种情况：'prev'、'inner' 和 'next'，分别表示放置在目标节点前、插入至目标节点和放置在目标节点后}\ntrue",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_allow_drop",ds_ispro:true,ds_savedb:false,group1:"属性",group2:"节点拖拽"});d.push(M);var K=getProInfoByObj("textarea",{ds_id:"ds_tree",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"自定义数据",ds_placeholder:'[{"ID":"a","NAME":"A","children":[{"ID":"a-1","NAME":"A-1"}]}]',ds_textarea:"",ds_name:"ds_tree",ds_valformat:"JSON",ds_ispro:true,group1:"属性",group2:"自定义数据"});d.push(K);var L=getProInfoByObj("switch",{ds_id:"ds_showTitTip",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"显示设计提示",ds_name:"ds_showTitTip",ds_switch:false,ds_ispro:true,group1:"属性",group2:"设计提示"});d.push(L);var z=getProInfoByObj("input",{ds_id:"ds_param",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"推送参数名",ds_placeholder:"控件推送参数名",ds_input:"",ds_name:"ds_param",ds_ispro:true,group1:"参数推送",group2:""});d.push(z);var W=getProInfoByObj("input",{ds_id:"ds_backParamCondition",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"撤销推送条件",ds_placeholder:"推送参数名.A=='a'||推送参数名.A=='b'",ds_input:"",ds_name:"ds_backParamCondition",ds_ispro:true,group1:"参数推送",group2:""});d.push(W);var J=getProInfoByObj("select",{ds_id:"ds_trigger",ds_pid:VUECFG.ctrlId,ds_labeltxt:"触发刷新控件",ds_placeholder:"请选择触发刷新控件",ds_style:"ds-mt-1",ds_draggable:"false",ds_options:[],ds_select_visible_change:"getAllPageCtrl",ds_select:"",ds_name:"ds_trigger",ds_ispro:true,ds_multiple:true,group1:"控件加载",group2:""});d.push(J);var Y=getProInfoByObj("select",{ds_id:"ds_loading",ds_pid:VUECFG.ctrlId,ds_labeltxt:"加载机制",ds_placeholder:"请选择加载机制",ds_style:"ds-mt-1",ds_draggable:"false",ds_group:false,ds_options:[{value:"first",label:"优先加载"},{value:"normal",label:"正常加载"},{value:"lazy",label:"懒加载"}],ds_select:"normal",ds_select_change:"changeCtrlLoading",ds_name:"ds_loading",ds_ispro:true,group1:"控件加载",group2:""});d.push(Y);var Q=getProInfoByObj("switch",{ds_id:"ds_show",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"显示控件",ds_name:"ds_show",ds_switch:true,ds_ispro:true,group1:"显示设置",group2:""});d.push(Q);var X=getProInfoByObj("input",{ds_id:"ds_showCondition",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"显示条件",ds_placeholder:"${V.推送参数名.A}=='a'||${V.推送参数名.A}=='b'",ds_input:"",ds_name:"ds_showCondition",ds_ispro:true,group1:"显示设置",group2:""});d.push(X);var Z=getProInfoByObj("jseditor",{ds_id:"ds_load_success",ds_pid:VUECFG.ctrlId,ds_labeltxt:"加载完成事件",ds_placeholder:"脚本",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称},//trigger:是否触发控件刷新",ds_prepend:"fn(obj,trigger){",ds_jseditor_change:"",ds_name:"ds_load_success",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});d.push(Z);var ee=getProInfoByObj("jseditor",{ds_id:"ds_tree_currentChange",ds_pid:VUECFG.ctrlId,ds_labeltxt:"选中节点变化",ds_placeholder:"params(data,node)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_currentChange",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});d.push(ee);var de=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_click",ds_pid:VUECFG.ctrlId,ds_labeltxt:"节点点击事件",ds_placeholder:"params(data,node,component)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据,component:节点组件本身}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_node_click",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});d.push(de);var se=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_click_after",ds_pid:VUECFG.ctrlId,ds_labeltxt:"节点点击后事件",ds_placeholder:"params(data,node,component)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据,component:节点组件本身}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_node_click_after",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});d.push(se);var te=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_contextmenu",ds_pid:VUECFG.ctrlId,ds_labeltxt:"右击节点事件",ds_placeholder:"params(data,node,component)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据,component:节点组件本身}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_node_contextmenu",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});d.push(te);var re=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_expand",ds_pid:VUECFG.ctrlId,ds_labeltxt:"节点展开事件",ds_placeholder:"params(data,node,component)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据,component:节点组件本身}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_node_expand",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});d.push(re);var _e=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_collapse",ds_pid:VUECFG.ctrlId,ds_labeltxt:"节点关闭事件",ds_placeholder:"params(data,node,component)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:当前节点的 Node 对象,data:当前节点的数据,component:节点组件本身}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_node_collapse",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});d.push(_e);var oe=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_check",ds_pid:VUECFG.ctrlId,ds_labeltxt:"复选框点击事件",ds_placeholder:"params(node,checkInfo)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:传递给 data 属性的数组中该节点所对应的对象,checkInfo:选中状态对象}",ds_prepend:"fn(obj,val){",ds_name:"ds_tree_node_check",ds_ispro:true,ds_savedb:false,ds_show:false,group1:"事件",group2:""});d.push(oe);var ae=getProInfoByObj("jseditor",{ds_id:"ds_tree_check_change",ds_pid:VUECFG.ctrlId,ds_labeltxt:"复选框选中状态变更",ds_placeholder:"params(data,isCheck,isCheckChild)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{data:当前节点的数据,isCheck:节点是否被选中,isCheckChild:节点的子树中是否有被选中的节点}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_check_change",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});d.push(ae);var ne=getProInfoByObj("jseditor",{ds_id:"ds_tree_disabled",ds_pid:VUECFG.ctrlId,ds_labeltxt:"节点是否禁用",ds_placeholder:"params(data,isCheck,isCheckChild)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{data:当前节点的数据,node:节点对象}\n"+"val.data.disabled?val.data.disabled:false",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_disabled",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});d.push(ne);var ie=getProInfoByObj("jseditor",{ds_id:"ds_tree_render_content",ds_pid:VUECFG.ctrlId,ds_labeltxt:"节点内容渲染",ds_placeholder:"params(h,node, data, store)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:渲染信息",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_render_content",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});d.push(ie);var le=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_drag_start",ds_pid:VUECFG.ctrlId,ds_labeltxt:"拖拽开始事件",ds_placeholder:"params(node,event)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{node:拖拽的节点对象,event:事件对象}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_node_drag_start",ds_ispro:true,ds_savedb:false,group1:"事件",group2:"节点拖拽事件"});d.push(le);var ce=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_drag_enter",ds_pid:VUECFG.ctrlId,ds_labeltxt:"进入其他节点时触发",ds_placeholder:"params(draggingNode,targetNode,event)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:被拖拽的 Node 对象,targetNode:所进入节点对应的 Node 对象,event:事件对象}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_node_drag_enter",ds_ispro:true,ds_savedb:false,group1:"事件",group2:"节点拖拽事件"});d.push(ce);var pe=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_drag_Leave",ds_pid:VUECFG.ctrlId,ds_labeltxt:"离开某个节点时触发",ds_placeholder:"params(draggingNode,leaveNode,event)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:被拖拽的 Node 对象,leaveNode:所离开的节点对应的 Node 对象,event:事件对象}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_node_drag_Leave",ds_ispro:true,ds_savedb:false,group1:"事件",group2:"节点拖拽事件"});d.push(pe);var ge=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_drag_over",ds_pid:VUECFG.ctrlId,ds_labeltxt:"拖拽节点时触发",ds_placeholder:"params(draggingNode,targetNode,event)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//（类似浏览器的 mouseover 事件）obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:被拖拽的 Node 对象,targetNode:当前进入节点对应的 Node 对象,event:事件对象}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_node_drag_over",ds_ispro:true,ds_savedb:false,group1:"事件",group2:"节点拖拽事件"});d.push(ge);var ue=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_drag_end",ds_pid:VUECFG.ctrlId,ds_labeltxt:"拖拽结束时触发",ds_placeholder:"params(draggingNode,targetNode,position,event)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//拖拽结束时（可能未成功）触发的事件 obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:被拖拽的 Node 对象,targetNode:结束拖拽时最后进入的节点 Node 对象,position:被拖拽节点的放置位置（before、after、inner）,event:事件对象}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_node_drag_end",ds_ispro:true,ds_savedb:false,group1:"事件",group2:"节点拖拽事件"});d.push(ue);var fe=getProInfoByObj("jseditor",{ds_id:"ds_tree_node_drag",ds_pid:VUECFG.ctrlId,ds_labeltxt:"拖拽结束",ds_placeholder:"params(draggingNode,targetNode,position,event)",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:{draggingNode:被拖拽的 Node 对象,targetNode:结束拖拽时最后进入的节点 Node 对象(可能为空),position:被拖拽节点的放置位置（before、after、inner）,event:事件对象}",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_tree_node_drag",ds_ispro:true,ds_savedb:false,group1:"事件",group2:"节点拖拽事件"});d.push(fe);if(VUECFG.proObj[VUECFG.ctrlId]&&!e){var he=VUECFG.proObj[VUECFG.ctrlId];for(var be=0;be<d.length;be++){for(var ve=0;ve<he.length;ve++){if(d[be].info.ds_name==he[ve].info.ds_name){var s=d[be].type.split("drag_")[1];d[be].info["ds_"+s]=he[ve].info["ds_"+s];if(!$DS.util.isUndefined(he[ve].info["ds_show"])&&he[ve].info["ds_name"]!="ds_node_key")d[be].info["ds_show"]=he[ve].info["ds_show"]}}}}VUECFG.proObj[VUECFG.ctrlId]=[];VUECFG.proArr=formatterCtrlProCfg(d);VUECFG.proObj[VUECFG.ctrlId]=d;$("#templetePro").click()}function setTreeVal(e,d,s){var t=$DS.getCtrlById(e);var r=getSourceById(VUECFG.groupObj[e]);if(r){if(!d&&t.info.ds_name&&$DS.getSourceData(r,s)){d=$DS.getSourceData(r,s)}changeTreeProForSqlData(t.info,r.sourceType);t.info.ds_tree=d}else{t.info.ds_tree=d?d:[]}}function changeTreeProForSqlData(e,d){let s=false;if(d=="sqlData"){s=true}let t={ds_tree_nameFiled_sql:s,ds_tree_idFiled_sql:s,ds_tree_pidFiled_sql:s};$DS.setRightProShow(e.ds_id,t)}function changTreeDataFiled(e,d){let s=e.ds_tree_idFiled_sql;let t=e.ds_tree_pidFiled_sql;let r=e.ds_tree_nameFiled_sql;if(!s){console.error("未设置唯一ID字段");return d}if(!t){console.error("未设置上级ID字段");return d}if(!r){console.error("未设置名称字段");return d}for(let e=0;e<d.length;e++){let _=d[e];_["ID"]=_[s];_["PID"]=_[t];_["NAME"]=_[r]}d=$DS.util.children(d,"ID","PID","children");if(e.ds_tree_rootId&&e.ds_tree_rootText){var _=[{}];_[0][s]=e.ds_tree_rootId;_[0][t]="";_[0][r]=e.ds_tree_rootText;_[0].children=d;d=_}return d}function getTreeVal(e){var d=$DS.getCtrlById(e);if(!d)console.error("【ID为"+e+"】的控件不存在!");if(d.info.ds_tree_showCheckbox){return $tree.getCheckedNodes(e)}else{var s=$tree.getCurrentNode(e);return s?[s]:[]}}function selectCurrentNodeKey(e){var d=$DS.getCtrlById(e.ds_pid).info;if(e.ds_id==="ds_tree_default_checked_keys"&&!d.ds_tree_showCheckbox){alert("请先开启控件的复选框!");return}if(d.ds_tree){var s=d.ds_tree;var t={node_key:d.ds_node_key,props:{label:d.ds_label_filed,children:d.ds_children_filed},check_strictly:d.ds_tree_check_strictly,show_checkbox:e.ds_id==="ds_tree_default_current_node_key"?false:true,filterFields:["NAME"],expand_on_click_node:d.ds_tree_expand_on_click_node,default_expanded_keys:d.ds_tree_default_expanded_keys,default_checked_keys:d.ds_tree_default_checked_keys,current_node_key:d.ds_tree_default_current_node_key,showCancelBtn:true};$DS.openCfgTree(t,s,function(s,t){if(s){e.ds_input="";var r=d.ds_node_key;if(e.ds_id==="ds_tree_default_checked_keys"){d.ds_tree_default_checked_keys=[];for(let t=0;t<s.length;t++){d.ds_tree_default_checked_keys.push(s[t][r]);if(t===s.length-1){e.ds_input+=s[t][r]}else{e.ds_input+=s[t][r]+","}}}else{e.ds_input=s[d.ds_node_key];d.ds_tree_default_current_node_key=s[r]}}},"50%","70%","设置默认选中节点","",function(s){if(e.ds_id==="ds_tree_default_checked_keys"){$DS.setPro(d.ds_id,"ds_tree_default_checked_keys","input",[])}else{$DS.setPro(d.ds_id,"ds_tree_default_current_node_key","input","")}})}else{alert("未设置树数据源!")}}function setCurrentNodeByKey(e,d){var s=window.top[e+"treeRef"];s.setCurrentKey(d);var t=$DS.getCtrlById(e).info;var r=getCurrentNodeByCtrlId(e);var _=[];if(r){var o=$DS.util.clone(r);_.push(o)}$DS.dealPms(t,_);jumpToSelectNode(s.$el,r)}function getCurrentNodeByCtrlId(e){var d=window.top[e+"treeRef"];return d.getCurrentNode()}function jumpToSelectNode(e,d){if(e.querySelectorAll(".el-tree-node__content")&&e.querySelectorAll(".el-tree-node__content")[d.$treeNodeId-1]){var s=e.querySelectorAll(".el-tree-node__content")[d.$treeNodeId-1].getBoundingClientRect().top;var t=e.getBoundingClientRect().top;e.scrollTop=s-t}}function setCheckedKeysByKeys(e,d,s){var t=$DS.getCtrlById(e).info;if(t.ds_tree_showCheckbox){var r=window.top[e+"treeRef"];if(!$DS.util.isArray(d)){console.error("数据类型错误,需传递数组")}else{r.setCheckedKeys(d,s?s:false);var _=[];_=getCheckedNodesByCtrlId(e);if(_){_=$DS.util.clone(_)}$DS.dealPms(t,_)}}else{console.error("未开启复选框!")}}function getCheckedNodesByCtrlId(e){var d=$DS.getCtrlById(e).info;if(d.ds_tree_showCheckbox){var s=window.top[e+"treeRef"];var t=s.getCheckedNodes();if(d.ds_tree_choseEndOnly&&t&&t.length>0){t=t.filter(e=>{if(!e.children){return e}});return t}return t}else{console.error("未开启复选框!")}}function getHalfCheckedNodesByCtrlId(e){var d=$DS.getCtrlById(e).info;if(d.ds_tree_showCheckbox){var s=window.top[e+"treeRef"];return s.getHalfCheckedNodes()}else{console.error("未开启复选框!")}}function clearCheckedNodesByCtrlId(e){var d=$DS.getCtrlById(e).info;if(d.ds_tree_showCheckbox){var s=window.top[e+"treeRef"];s.setCheckedKeys([])}else{console.error("未开启复选框!")}}function clearTreeVal(e){e.info.ds_tree_checked_keys=[];e.info.ds_tree=[]}function isTrigger(e){return true}function isshowIgnoreRoot(e,d){debugger;$DS.setRightProShow(e.ds_pid,{ds_tree_isignoreRoot:d})}