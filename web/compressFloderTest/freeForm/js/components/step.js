var $step={type:"drag_step",dataType:"allData",uuid:Date.parse(new Date),getConfig:getStepConfig,register:registerStep,showProperty:showPropertyStep,change:changeStep,setData:setStepVal,getData:getStepVal,clearData:clearStepVal,buildStepCfg:buildStepCfg};function getStepConfig(){return{ds_id:"",ds_ctrlname:"STEP_"+$step.uuid++,ds_show:true,ds_showCondition:"",ds_width:"100%",ds_height:"6rem",ds_style:"drawing-item",ds_loading:"normal",ds_datasource:"",ds_ispro:false,ds_pid:"",ds_draggable:"true",ds_step_titleField:"",ds_step_statusField:"",ds_step_urlField:"",ds_step_iconField:"",ds_step_descriptionField:"",ds_step_data:[],ds_step_direction:"horizontal",ds_step_active:1,ds_step_process_status:"process",ds_step_finish_status:"finish",ds_step_space:"",ds_step_align_center:true,ds_step_simple:false,ds_step_padding:"0",ds_step_margin:"0",ds_inner_title_color:"",ds_inner_title_fontWeight:"",ds_inner_title_fontFamily:"",ds_inner_title_fontSize:"",ds_inner_des_color:"",ds_inner_des_fontWeight:"",ds_inner_des_fontFamily:"",ds_inner_des_fontSize:"",ds_load_success:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称},//trigger:是否触发控件刷新",ds_step_beforechange:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:变更前步骤index",ds_step_change:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:当前步骤index",ds_step_cfg:[{title:"步骤一",status:"",url:"",description:"",icon:"",LAY_TABLE_INDEX:0},{title:"步骤二",status:"",url:"",description:"",icon:"",LAY_TABLE_INDEX:1},{title:"步骤三",status:"",url:"",description:"",icon:"",LAY_TABLE_INDEX:2}],ds_step_all_cfg:[],ds_step_node_cilck:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称},val:点击的DOM元素"}}function registerStep(){Vue.component("drag_step",{props:["type","info"],created:function(){this.$nextTick(function(){addListener(this);if(!this.info.ds_ispro)temporary.loadRegister[this.info.ds_id]=true;var s=this.info.ds_inner_title_color;this.info.ds_inner_title_color="";this.info.ds_inner_title_color=s;VUECFG.$refs[this.info.ds_id]=this;if(VUECFG.viewStatu){$(`#${this.info.ds_id}`).find(".el-step").click(function(){debugger;var s=$(this).attr("sid");var e=$DS.getCtrlById(s).info;if(e.ds_step_node_cilck){$DS.eval(e.ds_step_node_cilck,e,this)}})}})},data:function(){return{hide:"y-hide",refdate:Date.parse(new Date)}},computed:{computed_drag:function(){if(VUECFG.viewStatu)return false;return this.info.ds_draggable},computed_style:function(){debugger;var s={border:"0px",overflow:"auto",padding:this.info.ds_step_padding,margin:this.info.ds_step_margin};if(!VUECFG.viewStatu){s["height"]="calc(100% - 0rem)"}return s},computed_innerstyle(){debugger;if(this.info.ds_inner_title_color||this.info.ds_inner_title_fontWeight||this.info.ds_inner_title_fontSize||this.info.ds_inner_title_fontFamily){$(`#${this.info.ds_id} .el-step__title`).css({color:this.info.ds_inner_title_color,"font-size":this.info.ds_inner_title_fontSize,"font-weight":this.info.ds_inner_title_fontWeight,"font-family":this.info.ds_inner_title_fontFamily})}if(this.info.ds_inner_des_color||this.info.ds_inner_des_fontWeight||this.info.ds_inner_des_fontSize||this.info.ds_inner_des_fontFamily){$(`#${this.info.ds_id} .el-step__description`).css({color:this.info.ds_inner_des_color,"font-size":this.info.ds_inner_des_fontSize,"font-weight":this.info.ds_inner_des_fontWeight,"font-family":this.info.ds_inner_des_fontFamily})}return{color:this.info.ds_inner_title_color}},computed_show:function(){var refdateStr=`${this.refdate}_change`;if(!VUECFG.viewStatu){return this.info.ds_ispro&&!this.info.ds_show?"y-hide":"y-show"}else{if(this.info.ds_showCondition){var str=$DS.util.replace(this.info.ds_showCondition);return eval(str)?"y-show":"y-hide"}return this.info.ds_show?"y-show":"y-hide"}},computed_stepName:function(){if(!VUECFG.viewStatu)return this.info.ds_ctrlname;return""},computed_Ts:function(){if(!VUECFG.viewStatu){return{height:"0rem"}}},computed_step:function(){debugger;var s=[];if(!this.info.ds_step_cfg&&!this.info.ds_step_data)return s;var e=$DS.util.clone(this.info.ds_step_cfg);if(e&&e.length>0){for(var t=0;t<e.length;t++){s.push({title:e[t].title,icon:e[t].icon,url:e[t].url,description:e[t].description,status:e[t].status})}}if(this.info.ds_step_data&&this.info.ds_step_data.length>0){var d=buildStepCfg(this.info.ds_step_data,this.info.ds_step_cfg,this.info.ds_step_titleField,this.info.ds_step_statusField,this.info.ds_step_urlField,this.info.ds_step_descriptionField,this.info.ds_step_iconField);s=s.concat(d)}this.info.ds_step_all_cfg=s;return s},computed_id:function(){return this.info.ds_id+"_step"}},methods:{changeCurrId:changeCurrId,mouseOver:ctrlMouseOver,mouseLeave:ctrlMouseLeave},template:util.getModelHtml("drag_step")})}function freshStyle(){debugger;console.log("刷新")}function changeStep(s,e,t){debugger;s.$type=e;var d=$DS.eval(s.ds_step_beforechange,s,s.ds_step_active);if(!d)return false;if(!t)t=1;var _=s.ds_step_all_cfg.length-1;var i=false;if(s.ds_step_active<_&&e=="add"){i=true;s.ds_step_active+=t}if(s.ds_step_active>=1&&e=="sub"){i=true;s.ds_step_active-=t}if(i)$DS.eval(s.ds_step_change,s,s.ds_step_active)}function loadSuccess(s,e){var t=this.info;$DS.eval(t.ds_load_success,t)}function showPropertyStep(s){var e=[];var t=getProInfoByObj("select",{ds_id:"type",ds_pid:VUECFG.ctrlId,ds_labeltxt:"组件类型",ds_placeholder:"组件类型",ds_style:"ds-mt-1",ds_draggable:"false",ds_group:true,ds_options:getAllCtrl(),ds_select:$step.type,ds_select_change:"changeFormCtrl",ds_name:"type",ds_ispro:true});e.push(t);var d=getProInfoByObj("input",{ds_id:"ds_ctrlname",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"控件名",ds_placeholder:"控件名",ds_input:VUECFG.formObj[VUECFG.ctrlId].info.ds_ctrlname,ds_input_blur:"checkDuplication",ds_name:"ds_ctrlname",ds_ispro:true});e.push(d);var _=getProInfoByObj("input",{ds_id:"ds_width",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"控件宽度",ds_placeholder:"控件宽度",ds_input:"100%",ds_name:"ds_width",ds_ispro:true,ds_isrequired:false});e.push(_);var i=getProInfoByObj("input",{ds_id:"ds_height",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"控件高度",ds_placeholder:"控件高度",ds_input:"6rem",ds_name:"ds_height",ds_ispro:true});e.push(i);var r=getProInfoByObj("input",{ds_id:"ds_step_cfg",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"步骤条配置",ds_placeholder:"步骤条配置",ds_input:[{title:"步骤一",status:"",url:"",description:"",icon:"",LAY_TABLE_INDEX:0},{title:"步骤二",status:"",url:"",description:"",icon:"",LAY_TABLE_INDEX:1},{title:"步骤三",status:"",url:"",description:"",icon:"",LAY_TABLE_INDEX:2}],ds_name:"ds_step_cfg",ds_readonly:true,ds_input_focus:"stepCfg",ds_valformat:"JSON",ds_ispro:true});e.push(r);var l=getProInfoByObj("input",{ds_id:"ds_step_active",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"当前激活步骤",ds_placeholder:"当前激活步骤",ds_input:1,ds_valformat:"NUMBER",ds_name:"ds_step_active",ds_ispro:true});e.push(l);var o=getProInfoByObj("select",{ds_id:"ds_datasource",ds_pid:VUECFG.ctrlId,ds_labeltxt:"数据源",ds_placeholder:"数据源",ds_style:"ds-mt-1",ds_draggable:"false",ds_options:getAllDatasource(),ds_select:"",ds_select_change:"changeDataSourceForCtrl",ds_select_visible_change:"changeDatasourceOption",ds_name:"ds_datasource",ds_ispro:true,group1:"数据源",group2:""});e.push(o);var a=getProInfoByObj("select",{ds_id:"ds_step_titleField",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"标题字段",ds_placeholder:"标题字段",ds_select:"",ds_name:"ds_step_titleField",ds_options:getStepSourceFieldOption(),ds_ispro:true,group1:"数据构建",group2:""});e.push(a);var n=getProInfoByObj("select",{ds_id:"ds_step_statusField",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"状态字段",ds_placeholder:"状态字段",ds_select:"",ds_name:"ds_step_statusField",ds_options:getStepSourceFieldOption(),ds_ispro:true,group1:"数据构建",group2:""});e.push(n);var p=getProInfoByObj("select",{ds_id:"ds_step_descriptionField",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"描述字段",ds_placeholder:"描述字段",ds_select:"",ds_name:"ds_step_descriptionField",ds_options:getStepSourceFieldOption(),ds_ispro:true,group1:"数据构建",group2:""});e.push(p);var u=getProInfoByObj("select",{ds_id:"ds_step_urlField",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"参数字段",ds_placeholder:"参数字段",ds_select:"",ds_name:"ds_step_urlField",ds_options:getStepSourceFieldOption(),ds_ispro:true,group1:"数据构建",group2:""});e.push(u);var c=getProInfoByObj("select",{ds_id:"ds_step_iconField",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"图标字段",ds_placeholder:"图标字段",ds_select:"",ds_name:"ds_step_iconField",ds_options:getStepSourceFieldOption(),ds_ispro:true,group1:"数据构建",group2:""});e.push(c);var g=getProInfoByObj("input",{ds_id:"ds_step_padding",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"内边距大小",ds_placeholder:"内边距大小",ds_input:"0rem",ds_name:"ds_step_padding",ds_ispro:true,group1:"属性",group2:"组件布局"});e.push(g);var f=getProInfoByObj("input",{ds_id:"ds_step_margin",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"外边距大小",ds_placeholder:"外边距大小",ds_input:"0rem",ds_name:"ds_step_margin",ds_ispro:true,group1:"属性",group2:"组件布局"});e.push(f);var h=getProInfoByObj("color",{ds_id:"ds_inner_title_color",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"标题颜色",ds_name:"ds_inner_title_color",ds_ispro:true,ds_show_alpha:true,ds_color:"#606266",group1:"属性",group2:"标题样式"});e.push(h);var b=getProInfoByObj("select",{ds_id:"ds_inner_title_fontWeight",ds_pid:VUECFG.ctrlId,ds_labeltxt:"标题字体加粗",ds_placeholder:"标题字体加粗",ds_style:"ds-mt-1",ds_draggable:"false",ds_options:getFontWeight(),ds_select:"bold",ds_name:"ds_inner_title_fontWeight",ds_ispro:true,group1:"属性",group2:"标题样式"});e.push(b);var m=getProInfoByObj("select",{ds_id:"ds_inner_title_fontFamily",ds_pid:VUECFG.ctrlId,ds_labeltxt:"标题字体样式",ds_placeholder:"标题字体样式",ds_style:"ds-mt-1",ds_draggable:"false",ds_options:getFontFamily(),ds_select:"微软雅黑",ds_name:"ds_inner_title_fontFamily",ds_ispro:true,group1:"属性",group2:"标题样式"});e.push(m);var v=getProInfoByObj("input",{ds_id:"ds_inner_title_fontSize",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"标题字体大小",ds_placeholder:"标题字体大小",ds_input:"1rem",ds_name:"ds_inner_title_fontSize",ds_ispro:true,ds_isrequired:false,group1:"属性",group2:"标题样式"});e.push(v);var y=getProInfoByObj("switch",{ds_id:"ds_step_align_center",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"文字居中对齐",ds_name:"ds_step_align_center",ds_switch:true,ds_ispro:true,group1:"属性",group2:"组件字体"});e.push(y);var F=getProInfoByObj("color",{ds_id:"ds_inner_des_color",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"描述颜色",ds_name:"ds_inner_des_color",ds_ispro:true,ds_show_alpha:true,ds_color:"#606266",group1:"属性",group2:"组件字体"});e.push(F);var I=getProInfoByObj("select",{ds_id:"ds_inner_des_fontWeight",ds_pid:VUECFG.ctrlId,ds_labeltxt:"描述字体加粗",ds_placeholder:"描述字体加粗",ds_style:"ds-mt-1",ds_draggable:"false",ds_options:getFontWeight(),ds_select:"bold",ds_name:"ds_inner_des_fontWeight",ds_ispro:true,group1:"属性",group2:"组件字体"});e.push(I);var C=getProInfoByObj("select",{ds_id:"ds_inner_des_fontFamily",ds_pid:VUECFG.ctrlId,ds_labeltxt:"描述字体样式",ds_placeholder:"描述字体样式",ds_style:"ds-mt-1",ds_draggable:"false",ds_options:getFontFamily(),ds_select:"微软雅黑",ds_name:"ds_inner_des_fontFamily",ds_ispro:true,group1:"属性",group2:"组件字体"});e.push(C);var E=getProInfoByObj("input",{ds_id:"ds_inner_des_fontSize",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"描述字体大小",ds_placeholder:"描述字体大小",ds_input:"1rem",ds_name:"ds_inner_des_fontSize",ds_ispro:true,ds_isrequired:false,group1:"属性",group2:"组件字体"});e.push(E);var S=getProInfoByObj("switch",{ds_id:"ds_step_simple",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"简洁风格",ds_name:"ds_step_simple",ds_switch:false,ds_ispro:true,group1:"属性",group2:"组件属性"});e.push(S);var V=getProInfoByObj("radio",{ds_id:"ds_step_direction",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"显示方向",ds_name:"ds_step_direction",ds_radio:"horizontal",ds_options:[{value:"horizontal",text:"横向"},{value:"vertical",text:"纵向"}],ds_radiobtn:true,ds_ispro:true,group1:"属性",group2:"组件属性"});e.push(V);var j=getProInfoByObj("select",{ds_id:"ds_step_process_status",ds_pid:VUECFG.ctrlId,ds_labeltxt:"当前步骤状态",ds_placeholder:"",ds_style:"ds-mt-1",ds_draggable:"false",ds_group:false,ds_options:[{value:"wait",label:"wait"},{value:"process",label:"process"},{value:"finish",label:"finish"},{value:"error",label:"error"},{value:"success",label:"success"}],ds_select:"process",ds_name:"ds_step_process_status",ds_ispro:true,ds_show:true,group1:"属性",group2:"组件属性"});e.push(j);var w=getProInfoByObj("select",{ds_id:"ds_step_finish_status",ds_pid:VUECFG.ctrlId,ds_labeltxt:"结束步骤状态",ds_placeholder:"",ds_style:"ds-mt-1",ds_draggable:"false",ds_group:false,ds_options:[{value:"wait",label:"wait"},{value:"process",label:"process"},{value:"finish",label:"finish"},{value:"error",label:"error"},{value:"success",label:"success"}],ds_select:"finish",ds_name:"ds_step_finish_status",ds_ispro:true,ds_show:true,group1:"属性",group2:"组件属性"});e.push(w);var G=getProInfoByObj("input",{ds_id:"ds_step_space",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"步骤宽度",ds_placeholder:"步骤宽度",ds_input:"",ds_name:"ds_step_space",ds_ispro:true,group1:"属性",group2:"组件属性"});e.push(G);var U=getProInfoByObj("select",{ds_id:"ds_loading",ds_pid:VUECFG.ctrlId,ds_labeltxt:"加载机制",ds_placeholder:"请选择加载机制",ds_style:"ds-mt-1",ds_draggable:"false",ds_group:false,ds_options:[{value:"first",label:"优先加载"},{value:"normal",label:"正常加载"},{value:"lazy",label:"懒加载"}],ds_select:"normal",ds_select_change:"changeCtrlLoading",ds_name:"ds_loading",ds_ispro:true,group1:"控件加载",group2:""});e.push(U);var O=getProInfoByObj("switch",{ds_id:"ds_show",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"显示控件",ds_name:"ds_show",ds_switch:true,ds_ispro:true,group1:"显示设置",group2:""});e.push(O);var B=getProInfoByObj("input",{ds_id:"ds_showCondition",ds_pid:VUECFG.ctrlId,ds_draggable:"false",ds_style:"ds-mt-1",ds_labeltxt:"显示条件",ds_placeholder:"${V.推送参数名.A}=='a'||${V.推送参数名.A}=='b'",ds_input:"",ds_name:"ds_showCondition",ds_ispro:true,group1:"显示设置",group2:""});e.push(B);var x=getProInfoByObj("jseditor",{ds_id:"ds_load_success",ds_pid:VUECFG.ctrlId,ds_labeltxt:"加载完成事件",ds_placeholder:"脚本",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称},//trigger:是否触发控件刷新",ds_prepend:"fn(obj,trigger){",ds_jseditor_change:"",ds_name:"ds_load_success",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});e.push(x);var D=getProInfoByObj("jseditor",{ds_id:"ds_step_beforechange",ds_pid:VUECFG.ctrlId,ds_labeltxt:"步骤变更前事件",ds_placeholder:"脚本",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:变更前步骤index",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_step_beforechange",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});e.push(D);var P=getProInfoByObj("jseditor",{ds_id:"ds_step_change",ds_pid:VUECFG.ctrlId,ds_labeltxt:"步骤变更事件",ds_placeholder:"脚本",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称}//val:当前步骤index",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_step_change",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});e.push(P);var A=getProInfoByObj("jseditor",{ds_id:"ds_step_node_cilck",ds_pid:VUECFG.ctrlId,ds_labeltxt:"步骤点击事件",ds_placeholder:"脚本",ds_style:"ds-mt-1",ds_draggable:"false",ds_jseditor:"//obj:配置对象{ds_id:组件id,ds_ctrlname:组件名称},val:点击的DOM元素",ds_prepend:"fn(obj,val){",ds_jseditor_change:"",ds_name:"ds_step_node_cilck",ds_ispro:true,ds_savedb:false,group1:"事件",group2:""});e.push(A);if(VUECFG.proObj[VUECFG.ctrlId]&&!s){var L=VUECFG.proObj[VUECFG.ctrlId];for(var z=0;z<e.length;z++){for(var T=0;T<L.length;T++){if(e[z].info.ds_name==L[T].info.ds_name){var t=e[z].type.split("drag_")[1];e[z].info["ds_"+t]=L[T].info["ds_"+t];if(!$DS.util.isUndefined(L[T].info["ds_show"]))e[z].info["ds_show"]=L[T].info["ds_show"]}}}}VUECFG.proObj[VUECFG.ctrlId]=[];VUECFG.proArr=formatterCtrlProCfg(e);VUECFG.proObj[VUECFG.ctrlId]=e;$("#templetePro").click()}function stepCfg(s,e){var t=s.ds_input;$DS.openCfgTable([{field:"title",title:"标题",width:.25,edit:"text"},{field:"status",title:"状态",width:.25,codeType:"select",code:[{name:"success",value:"success"},{name:"wait",value:"wait"},{name:"process",value:"process"},{name:"finish",value:"finish"},{name:"error",value:"error"}]},{field:"description",title:"描述",width:.25,edit:"text"},{field:"url",title:"参数",width:.25,edit:"text"},{field:"icon",title:"节点图标",width:.25,edit:"text",codeType:"icon"}],t,function(e,t){var d=window.top[t].id;var _=$DS.getCtrlById(d);$DS.getCtrlById(s.ds_pid).info.ds_step_cfg=JSON.parse(e);s.ds_input=JSON.parse(e)},"80%","80%","步骤条配置",{id:s.ds_pid})}function setStepVal(s,e,t){var d=$DS.getCtrlById(s);var _=getSourceById(VUECFG.groupObj[s]);if(_){if(!e&&d.info.ds_name&&$DS.getSourceData(_,t)){e=$DS.getSourceData(_,t)}d.info.ds_step_data=e.rows}else{d.info.ds_step_data=e?e.rows:[]}}function getStepVal(s){var e=$DS.getCtrlById(s);if(!e)console.error("【ID为"+s+"】的控件不存在!");return{activeData:e.info.ds_step_cfg[e.info.ds_step_active],activeIndex:e.info.ds_step_active}}function clearStepVal(s){s.info.ds_step_data=[]}function buildStepsBySource(s,e){var t=e.ds_step_titleField;var d=e.ds_step_statusField;var _=e.ds_step_urlField;var i=e.ds_step_iconField;var r=e.ds_step_descriptionField;return s.map(s=>{var e={};e["title"]=s[t]?s[t]:"";e["status"]=s[d]?s[d]:"";e["url"]=s[_]?s[_]:s[_];e["icon"]=s[i]?s[i]:"";e["description"]=s[r]?s[r]:"";return e})}function buildStepCfg(s,e,t,d,_,i,r){debugger;var l=[];var o=e.length;for(var a=0;a<s.length;a++){var n=a%o;var p={};if(e.length>0)p=$DS.util.clone(e[n]);if(t)p.title=s[a][t]?s[a][t]:"";if(d)p.status=s[a][d];p.url=_?`freeFromView.jsp?PAGEID=${s[a][_]}&PAGETITLE=${s[a][p.title]}&APPID=${VUECFG.appId}`:"";if(i)p.description=s[a][i]?s[a][i]:"";if(r)p.icon=s[a][r]?s[a][r]:"";l.push(p)}return l}function getStepSourceFieldOption(){debugger;var s=[{label:"无",value:""}];if(VUECFG.ctrlId){var e=$DS.getCtrlById(VUECFG.ctrlId).info;if(e.ds_datasource){var t=$DS.getSourceById(e.ds_datasource).columns;if(t){t.map(e=>{var t={};t["label"]=e.FIELD_NAMECN;t["value"]=e.FIELD_NAME;s.push(t)})}}}return s}